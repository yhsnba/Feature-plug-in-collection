# 🧪 功能测试指南 (更新版)

## 测试环境
- 前端: http://localhost:5173
- 后端: http://localhost:3001
- 测试文件夹: E:\挖藕\素材\测试

## 🆕 新增功能
- ✅ 修复了拼接撤回功能
- ✅ 添加了输出路径选择功能
- ✅ 添加了固定标签功能
- ✅ 改进了文件处理逻辑

## 🖼️ Flux IC-LoRA 图像拼接工具测试

### 测试步骤：
1. **选择左图**
   - 点击"🖼️ 选择左图"按钮
   - 选择一张基准图像
   - 验证：图像路径显示正确

2. **选择右图文件夹**
   - 点击"📁 选择右图文件夹"按钮
   - 选择包含多张图片的文件夹（E:\挖藕\素材\测试）
   - 验证：显示加载的图片数量

3. **设置输出路径**
   - 点击"📂 设置输出路径"按钮
   - 输入输出路径（例如：D:/output）
   - 验证：路径显示正确

4. **图像拼接预览**
   - 验证：自动生成真实拼接预览图
   - 验证：进度显示正确

5. **固定标签功能**
   - 勾选"📌 固定标签"选项
   - 输入标签描述
   - 验证：下一张时标签保持不变

6. **标签输入和保存**
   - 在标签输入框中输入描述
   - 点击"✅ 保存当前拼图和标签"
   - 验证：成功保存并移动到下一张

7. **撤回功能（已修复）**
   - 点击"↩️ 撤回上一步"
   - 验证：正确撤回到上一个处理的文件
   - 验证：标签内容恢复

## 📷 KontextLora 标注工具测试

### 测试步骤：
1. **加载原图文件夹**
   - 点击"📂 加载原图文件夹"
   - 选择原图文件夹
   - 验证：原图正确显示

2. **加载目标图文件夹**
   - 点击"📂 加载目标图文件夹"
   - 选择目标图文件夹
   - 验证：目标图正确显示

3. **标签输入**
   - 在标签输入框中输入描述
   - 验证：输入框响应正常

4. **保存功能**
   - 点击"💾 保存标签"
   - 验证：标签和文件保存成功

5. **导航功能**
   - 使用"◀️ 上一对"和"▶️ 下一对"按钮
   - 使用键盘左右箭头键
   - 验证：图像对切换正常

## 🎨 专业标注工具测试

### 测试步骤：
1. **选择图片目录**
   - 点击"📂 选择图片目录"
   - 选择包含图片的文件夹
   - 验证：图片加载并显示

2. **填写标注信息**
   - 触发词：输入"yimadaiclothing"
   - 服装结构：输入英文描述
   - 选择拍摄景别、方位、构图角度
   - 输入图片命名前缀
   - 验证：所有字段正常工作

3. **保存和导航**
   - 点击"💾 保存并下一张"
   - 验证：标签保存成功，移动到下一张
   - 使用"◀️ 上一张"按钮
   - 验证：导航功能正常

4. **完成处理**
   - 处理完所有图片
   - 验证：询问是否生成训练配置文件

## 🔧 通用功能测试

### 文件上传验证：
- 支持的格式：JPEG、PNG、GIF
- 文件大小限制：10MB
- 文件夹选择：支持webkitdirectory

### 通知系统：
- 成功通知：绿色，带✅图标
- 错误通知：红色，带❌图标
- 警告通知：黄色，带⚠️图标
- 信息通知：蓝色，带ℹ️图标

### 响应式设计：
- 桌面端：完整功能
- 移动端：自适应布局

## 🐛 已知问题和解决方案

### 问题1：文件夹选择在某些浏览器中可能不支持
**解决方案**：使用Chrome或Edge浏览器

### 问题2：图像拼接需要相同高度
**解决方案**：确保左图和右图高度一致

### 问题3：大文件上传可能超时
**解决方案**：调整服务器超时设置或压缩图片

## 📊 性能测试

### 建议测试数据：
- 小批量：5-10张图片
- 中批量：20-50张图片
- 大批量：100+张图片

### 监控指标：
- 上传速度
- 处理时间
- 内存使用
- 响应时间

## ✅ 测试检查清单

- [ ] Flux工具：左图上传
- [ ] Flux工具：右图文件夹上传
- [ ] Flux工具：图像拼接预览
- [ ] Flux工具：标签保存
- [ ] Flux工具：撤回功能
- [ ] Kontext工具：原图文件夹上传
- [ ] Kontext工具：目标图文件夹上传
- [ ] Kontext工具：标签保存
- [ ] Kontext工具：键盘导航
- [ ] Tag工具：图片目录上传
- [ ] Tag工具：多字段表单
- [ ] Tag工具：标签保存
- [ ] Tag工具：配置文件生成
- [ ] 通知系统：各种类型通知
- [ ] 响应式设计：移动端适配
- [ ] 错误处理：文件验证
- [ ] 错误处理：网络错误

## 🎯 测试结果

请在测试完成后记录：
- 成功功能：
- 发现的问题：
- 改进建议：
